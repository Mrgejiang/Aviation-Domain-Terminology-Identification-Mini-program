"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("PageSkeleton")()}Math||(a+t+o+n)();const a=()=>"./components/CustomNavbar.js",t=()=>"./components/TopSwiper.js",o=()=>"./components/CategoryPanel.js",n=()=>"./components/PreviewList.js",s=e.defineComponent({__name:"index",setup(a){const t=e.ref(null),o=e.er.database(),n=[{_id:"1",imgUrl:"https://mp-003d93a9-efde-40df-a943-25e82e419019.cdn.bspapp.com/images/notice1.png"},{_id:"2",imgUrl:"https://mp-003d93a9-efde-40df-a943-25e82e419019.cdn.bspapp.com/images/notice2.png"}],s=e.ref([]),r=async()=>{const a=o.collection("opendb-news-categories"),t=await a.field("_id,name,icon").get();s.value=t.result.data,e.index.setStorage({key:"categoryList",data:s}).then((()=>{console.log("获取并存储分类数据",e.index.getStorageSync("categoryList")._value)}))},i=e.ref(!0);e.onLoad((async()=>{i.value=!0,r().catch((()=>{e.index.showToast({title:"网络错误",icon:"error"})})).finally((()=>{i.value=!1}))}));const l=()=>{var e;null==(e=t.value)||e.getMore()},c=e.ref(!1),d=async()=>{var e;c.value=!0,await Promise.all([r(),null==(e=t.value)?void 0:e.resetData()]),c.value=!1};return(a,o)=>e.e({a:i.value},i.value?{}:{b:e.p({list:n}),c:e.p({list:s.value}),d:e.sr(t,"4df28747-4",{k:"PreviewRef"})},{e:e.o(l),f:e.o(d),g:c.value})}});wx.createPage(s);
