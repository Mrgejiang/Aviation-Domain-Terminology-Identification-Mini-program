"use strict";const e=require("../../common/vendor.js"),i=require("../../uni_modules/uni-upgrade-center-app/utils/call-check-version.js"),t=require("../../uni_modules/uni-id-pages/common/store.js"),n=e.er.database(),o={data(){return{gridList:[{text:this.$t("mine.showText"),icon:"chat"},{text:this.$t("mine.showText"),icon:"cloud-upload"},{text:this.$t("mine.showText"),icon:"contact"},{text:this.$t("mine.showText"),icon:"download"}],ucenterList:[[{title:this.$t("mine.readArticles"),to:"/pages/ucenter/read-news-log/read-news-log",icon:"flag"},{title:this.$t("mine.favorite"),event:"toFavorite",icon:"heart"}],[{title:this.$t("mine.feedback"),to:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback",icon:"help"},{title:this.$t("mine.settings"),to:"/pages/ucenter/settings/settings",icon:"gear"}]],listStyles:{height:"150rpx",width:"150rpx",border:{color:"#eee",width:"1px",style:"solid",radius:"100%"}}}},onLoad(){},onShow(){},computed:{userInfo:()=>t.store.userInfo,hasLogin:()=>t.store.hasLogin,appConfig:()=>getApp().globalData.config},methods:{toFavorite(){e.index.navigateTo({url:"./favorite/favorite"})},toSettings(){e.index.navigateTo({url:"/pages/ucenter/settings/settings"})},signIn(){this.$refs.signIn.open()},signInByAd(){this.$refs.signIn.showRewardedVideoAd()},ucenterListClick(e){!e.to&&e.event&&this[e.event]()},async checkVersion(){let t=await i.callCheckVersion();console.log(t),t.result.code>0||e.index.showToast({title:t.result.message,icon:"none"})},toUserInfo(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},tapGrid(i){e.index.showToast({title:this.$t("mine.clicked")+" "+(i+1),icon:"none"})},gotoMarket(){},getScore(){if(!this.userInfo)return e.index.showToast({title:this.$t("mine.checkScore"),icon:"none"});e.index.showLoading({mask:!0}),n.collection("uni-id-scores").where('"user_id" == $env.uid').field("score,balance").orderBy("create_date","desc").limit(1).get().then((i=>{console.log(i);const t=i.result.data[0];let n="";n=t?this.$t("mine.currentScore")+t.balance:this.$t("mine.noScore"),e.index.showToast({title:n,icon:"none"})})).finally((()=>{e.index.hideLoading()}))},async share(){let{result:i}=await n.collection("uni-id-users").where("'_id' == $cloudEnv_uid").field("my_invite_code").get(),t=i.data[0].my_invite_code;if(!t)return e.index.showToast({title:"请检查uni-config-center中uni-id配置，是否已启用 autoSetInviteCode",icon:"none"});console.log({myInviteCode:t}),this.appConfig.about}}};if(!Array){(e.resolveComponent("uni-sign-in")+e.resolveComponent("cloud-image")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list"))()}Math||((()=>"../../uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.js")+(()=>"../../uni_modules/uni-id-pages/components/cloud-image/cloud-image.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js"))();const s=e._export_sfc(o,[["render",function(i,t,n,o,s,r){return e.e({a:e.sr("signIn","0bb21b3f-0"),b:r.hasLogin&&r.userInfo.avatar_file&&r.userInfo.avatar_file.url},r.hasLogin&&r.userInfo.avatar_file&&r.userInfo.avatar_file.url?{c:e.p({width:"150rpx",height:"150rpx",src:r.userInfo.avatar_file.url})}:{d:e.p({color:"#ffffff",size:"50",type:"person-filled"})},{e:r.hasLogin},r.hasLogin?{f:e.t(r.userInfo.nickname||r.userInfo.username||r.userInfo.mobile)}:{g:e.t(i.$t("mine.notLogged"))},{h:e.o(((...e)=>r.toUserInfo&&r.toUserInfo(...e))),i:e.f(s.ucenterList,((i,t,n)=>({a:e.f(i,((i,t,o)=>e.e({a:i.showBadge},i.showBadge?{b:e.t(i.rightText)}:{},{c:t,d:e.o((e=>r.ucenterListClick(i)),t),e:"0bb21b3f-4-"+n+"-"+o+",0bb21b3f-3-"+n,f:e.p({title:i.title,link:!0,rightText:i.rightText,clickable:!0,to:i.to,"show-extra-icon":!0,extraIcon:{type:i.icon,color:"#999"}})}))),b:t,c:"0bb21b3f-3-"+n})))})}],["__scopeId","data-v-0bb21b3f"]]);wx.createPage(s);
