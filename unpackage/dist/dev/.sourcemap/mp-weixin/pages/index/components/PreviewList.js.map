{"version":3,"file":"PreviewList.js","sources":["pages/index/components/PreviewList.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5qGM6Z2iL-WIm-aWsOWfueiCsi9raXRlLW1hc3Rlci9wYWdlcy9pbmRleC9jb21wb25lbnRzL1ByZXZpZXdMaXN0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"caption\">\n\t\t<text class=\"text\">推荐</text>\n\t</view>\n\t<view class=\"guess\">\n\t\t<unicloud-db @load=\"handleLoad\" style=\"width: 100%;\" ref=\"udb\" v-slot:default=\"{data, loading, hasMore, error}\"\n\t\t\t:collection=\"collectionList\" :page-size=\"10\">\n\t\t\t<view v-if=\"error\">{{error.message}}</view>\n\t\t\t<view v-else-if=\"data\">\n\t\t\t\t<!-- <uni-list>\n\t\t\t\t\t<uni-list-item class=\"guess-item\" v-for=\"(item, index) in data\" :key=\"index\" showArrow\n\t\t\t\t\t\t:clickable=\"true\" @click=\"handleItemClick(item._id)\">\n\t\t\t\t\t\t<image class=\"image\" mode=\"aspectFill\" :src=\"item.poster\"></image>\n\t\t\t\t\t\t<view class=\"name\"> {{ getName(item.cnDetails,item.usDetails,item.euDetails) }} </view>\n\t\t\t\t\t\t<view class=\"price\">\n\t\t\t\t\t\t\t<text>{{ '分类' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</uni-list-item>\n\t\t\t\t</uni-list> -->\n\t\t\t\t<navigator class=\"guess-item\" v-for=\"item in data\" :key=\"item._id\"\n\t\t\t\t\t:url=\"`/pages/details/details?id=${item._id}`\" open-type=\"navigate\">\n\t\t\t\t\t<image class=\"image\" mode=\"aspectFill\" :src=\"item.poster\"></image>\n\t\t\t\t\t<view class=\"name\"> {{ item.cnDetails.name||item.usDetails.name||item.euDetails.name }} </view>\n\t\t\t\t\t<view class=\"price\">\n\t\t\t\t\t\t<text>{{ item.cnDetails.category_id[0]?.name||item.usDetails.category_id[0]?.name||item.euDetails.category_id[0]?.name||'未分类' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</navigator>\n\t\t\t</view>\n\t\t\t<uni-load-more :status=\"loading?'loading':(hasMore ? 'more' : 'noMore')\"></uni-load-more>\n\t\t</unicloud-db>\n\t</view>\n</template>\n\n<script lang=\"ts\" setup>\n\timport { ref } from 'vue'\n\n\ttype TermBase = {\n\t\tname : string,\n\t\tcategory_id : {\n\t\t\t_id : string,\n\t\t\tname : string\n\t\t}\n\t}\n\n\tconst db = uniCloud.database();\n\tconst category = db.collection('opendb-news-categories').field('_id,name').getTemp()\n\tconst acticle = db.collection('opendb-news-articles').field('_id,poster,cnDetails.name,cnDetails.category_id,usDetails.name,usDetails.category_id,euDetails.name,euDetails.category_id').getTemp()\n\tconst collectionList = [acticle, category]\n\n\tconst handleLoad = (data, ended, pagination) => {\n\t\t// `data` 当前查询结果\n\t\t// `ended` 是否有更多数据\n\t\t// `pagination` 分页信息 HBuilderX 3.1.5+ 支持\n\t\tuni.__f__('log','at pages/index/components/PreviewList.vue:54','结果', data);\n\t}\n\n\tconst loadMore = ref({\n\t\tcontentdown: '',\n\t\tcontentrefresh: '',\n\t\tcontentnomore: ''\n\t})\n\n\t//通过组合式 API 获得该模板引用\n\tconst udb = ref(null)\n\n\t//重置数据\n\tconst resetData = async () => {\n\t\tawait udb.value.loadData({\n\t\t\tclear: true\n\t\t}, () => {\n\t\t})\n\t\tuni.__f__('log','at pages/index/components/PreviewList.vue:72',\"重置数据\");\n\t}\n\n\t//获取更多\n\tconst getMore = async () => {\n\t\tawait udb.value.loadMore()\n\t\tuni.__f__('log','at pages/index/components/PreviewList.vue:78',\"加载更多\");\n\t}\n\n\t//暴露给父组件方法\n\tdefineExpose({\n\t\tresetData,\n\t\tgetMore\n\t})\n\n\t//跳转详情\n\t// const handleItemClick = (id : string) => {\n\t// \tuni.navigateTo({\n\t// \t\turl: `/pages/details/details?id=${id}`\n\t// \t})\n\t// }\n</script>\n\n<style lang=\"scss\">\n\t:host {\n\t\tdisplay: block;\n\t}\n\n\t.caption {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tline-height: 1;\n\t\tpadding: 36rpx 0 40rpx;\n\t\tfont-size: 32rpx;\n\t\tcolor: #262626;\n\n\t\t.text {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 28rpx 0 30rpx;\n\n\t\t\t&::before,\n\t\t\t&::after {\n\t\t\t\tcontent: '';\n\t\t\t\twidth: 20rpx;\n\t\t\t\theight: 20rpx;\n\t\t\t\tbackground-image: url(@/static/images/bubble.png);\n\t\t\t\tbackground-size: contain;\n\t\t\t\tmargin: 0 10rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 推荐 */\n\t.guess {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 20rpx;\n\n\t\t.guess-item {\n\t\t\twidth: 100%;\n\t\t\tpadding: 24rpx 20rpx 20rpx;\n\t\t\tmargin-bottom: 20rpx;\n\t\t\tborder-radius: 10rpx;\n\t\t\toverflow: hidden;\n\t\t\tbackground-color: #fff;\n\t\t}\n\n\t\t.image {\n\t\t\twidth: 100%;\n\t\t\theight: 304rpx;\n\t\t}\n\n\t\t.name {\n\t\t\theight: 50rpx;\n\t\t\tmargin: 10rpx 0;\n\t\t\tfont-size: 40rpx;\n\t\t\tfont-weight: 700;\n\t\t\tcolor: #262626;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tdisplay: -webkit-box;\n\t\t\t-webkit-line-clamp: 2;\n\t\t\t-webkit-box-orient: vertical;\n\t\t}\n\n\t\t.price {\n\t\t\tline-height: 1;\n\t\t\tcolor: #7b7979;\n\t\t\tfont-size: 26rpx;\n\t\t}\n\n\t\t.small {\n\t\t\tfont-size: 80%;\n\t\t}\n\t}\n\n\t// 加载提示文字\n\t.loading-text {\n\t\ttext-align: center;\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t\tpadding: 20rpx 0;\n\t}\n</style>","import Component from 'E:/桌面/创新培育/kite-master/pages/index/components/PreviewList.vue'\nwx.createComponent(Component)"],"names":["uniCloud","uni","ref","Component"],"mappings":";;;;;;;;;;;;;;;AA4CO,UAAA,KAAKA,iBAAS;AACd,UAAA,WAAW,GAAG,WAAW,wBAAwB,EAAE,MAAM,UAAU,EAAE;AACrE,UAAA,UAAU,GAAG,WAAW,sBAAsB,EAAE,MAAM,2HAA2H,EAAE;AACnL,UAAA,iBAAiB,CAAC,SAAS,QAAQ;AAEzC,UAAM,aAAa,CAAC,MAAM,OAAO,eAAe;AAI/CC,oBAAA,MAAI,MAAM,OAAM,gDAA+C,MAAM,IAAI;AAAA,IAAA;AAGzDC,sBAAI;AAAA,MACpB,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,eAAe;AAAA,IAAA,CACf;AAGK,UAAA,MAAMA,kBAAI,IAAI;AAGpB,UAAM,YAAY,YAAY;AACvB,YAAA,IAAI,MAAM,SAAS;AAAA,QACxB,OAAO;AAAA,MAAA,GACL,MAAM;AAAA,MAAA,CACR;AACGD,oBAAAA,MAAA,MAAM,OAAM,gDAA+C,MAAM;AAAA,IAAA;AAItE,UAAM,UAAU,YAAY;AACrB,YAAA,IAAI,MAAM;AACZA,oBAAAA,MAAA,MAAM,OAAM,gDAA+C,MAAM;AAAA,IAAA;AAIzD,aAAA;AAAA,MACZ;AAAA,MACA;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnFF,GAAG,gBAAgBE,SAAS;"}