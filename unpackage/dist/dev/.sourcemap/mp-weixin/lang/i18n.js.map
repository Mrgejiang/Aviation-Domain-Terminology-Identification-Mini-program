{"version":3,"file":"i18n.js","sources":["lang/i18n.js"],"sourcesContent":["import langEn from './en'\nimport zhHans from './zh-Hans'\nimport uniStarterConfig from '../uni-starter.config.js'\nconst {i18n:{enable:i18nEnable} }= uniStarterConfig\nconst messages = {\n\t'en': langEn,\n\t'zh-Hans': zhHans\n}\nlet currentLang\nif(i18nEnable){\n\tcurrentLang = uni.getStorageSync('CURRENT_LANG')\n}else{\n\tcurrentLang = \"zh-Hans\"\n}\n// console.log(uni.getStorageSync('CURRENT_LANG'),currentLang);\nif (!currentLang) {\n\tif (uni.getLocale) {\n\t\tconsole.log('获取应用语言:', uni.getLocale());\n\t\tlet language = 'en'\n\t\tif (uni.getLocale() != 'en') {\n\t\t\tlanguage = 'zh-Hans'\n\t\t}\n\t\tuni.setStorageSync('CURRENT_LANG', language)\n\t\tcurrentLang = language\n\t} else {\n\t\tuni.getSystemInfo({\n\t\t\tsuccess: function(res) {\n\t\t\t\tconsole.log('获取设备信息:', res);\n\t\t\t\tlet language = 'zh-Hans'\n\t\t\t\tif (res.language == 'en') {\n\t\t\t\t\tlanguage = 'en'\n\t\t\t\t}\n\t\t\t\tuni.setStorageSync('CURRENT_LANG', language)\n\t\t\t\tcurrentLang = language\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.error(err)\n\t\t\t}\n\t\t})\n\t}\n}\nlet i18nConfig = {\n\tlocale: currentLang, // set locale\n\tmessages // set locale messages\n}\n\n// #ifdef VUE2\nimport Vue from 'vue'\nimport VueI18n from 'vue-i18n'\nVue.use(VueI18n)\nconst i18n = new VueI18n(i18nConfig)\n// #endif\n\n// #ifdef VUE3\nimport {\n\tcreateI18n\n} from 'vue-i18n'\nconst i18n = createI18n(i18nConfig)\n// #endif\n\nexport default i18n\n\n\nif(i18nEnable){\nconsole.log(`\n\t你已开启多语言国际化，将自动根据语言获取【lang/en.js】或【lang/en.js】文件中配置的tabbar的值，\n\t覆盖你在pages.json中的tabbar的值\n\t如果你不需要多语言国际化，请打开配置文件uni-starter.config.js找到 -> i18n -> enable把值设置为false\n`);\n\tlet initLanguageAfter = () => {\n\t\tfunction $i18n(e){\n\t\t\t// #ifdef VUE3\n\t\t\treturn i18n.global.messages[i18n.global.locale][e]\n\t\t\t// #endif\n\t\t\treturn i18n.messages[i18n.locale][e]\n\t\t}\n\t\tsetTimeout(function(){\n\t\t\t//底部tabbar更新\n\t\t\t$i18n('tabbar').split(',').forEach((text, index) => {\n\t\t\t\t// console.log(text);\n\t\t\t\tuni.setTabBarItem({\n\t\t\t\t\tindex,\n\t\t\t\t\ttext,\n\t\t\t\t\tcomplete: e => {\n\t\t\t\t\t\t// console.log(\"e: \" + JSON.stringify(e));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},1)\n\t}\n\tinitLanguageAfter()\n\tuni.$on('changeLanguage', e => {\n\t\tconsole.log('changeLanguage', e);\n\t\tinitLanguageAfter(e)\n\t})\n}"],"names":["uniStarterConfig","langEn","zhHans","uni","createI18n"],"mappings":";;;;;AAGA,MAAM,EAAC,MAAK,EAAC,QAAO,WAAU,EAAG,IAAEA,kBAAgB;AACnD,MAAM,WAAW;AAAA,EAChB,MAAMC,QAAM;AAAA,EACZ,WAAWC,YAAM;AAClB;AACA,IAAI;AACJ,IAAG,YAAW;AACb,gBAAcC,cAAAA,MAAI,eAAe,cAAc;AAChD,OAAK;AACJ,gBAAc;AACf;AAEA,IAAI,CAAC,aAAa;AACjB,MAAIA,cAAAA,MAAI,WAAW;AAClBA,kBAAA,MAAA,MAAA,OAAA,sBAAY,WAAWA,cAAG,MAAC,UAAS,CAAE;AACtC,QAAI,WAAW;AACf,QAAIA,cAAG,MAAC,UAAW,KAAI,MAAM;AAC5B,iBAAW;AAAA,IACX;AACDA,wBAAI,eAAe,gBAAgB,QAAQ;AAC3C,kBAAc;AAAA,EAChB,OAAQ;AACNA,kBAAAA,MAAI,cAAc;AAAA,MACjB,SAAS,SAAS,KAAK;AACtBA,+DAAY,WAAW,GAAG;AAC1B,YAAI,WAAW;AACf,YAAI,IAAI,YAAY,MAAM;AACzB,qBAAW;AAAA,QACX;AACDA,4BAAI,eAAe,gBAAgB,QAAQ;AAC3C,sBAAc;AAAA,MACd;AAAA,MACD,MAAM,CAAC,QAAQ;AACdA,sBAAAA,2CAAc,GAAG;AAAA,MACjB;AAAA,IACJ,CAAG;AAAA,EACD;AACF;AACA,IAAI,aAAa;AAAA,EAChB,QAAQ;AAAA;AAAA,EACR;AAAA;AACD;AAaK,MAAC,OAAOC,cAAU,WAAC,UAAU;AAMlC,IAAG,YAAW;AACdD,gBAAAA,MAAA,MAAA,OAAA,sBAAY;AAAA;AAAA;AAAA;AAAA,CAIX;AACA,MAAI,oBAAoB,MAAM;AAC7B,aAAS,MAAM,GAAE;AAEhB,aAAO,KAAK,OAAO,SAAS,KAAK,OAAO,MAAM,EAAE,CAAC;AAAA,IAGjD;AACD,eAAW,WAAU;AAEpB,YAAM,QAAQ,EAAE,MAAM,GAAG,EAAE,QAAQ,CAAC,MAAM,UAAU;AAEnDA,sBAAAA,MAAI,cAAc;AAAA,UACjB;AAAA,UACA;AAAA,UACA,UAAU,OAAK;AAAA,UAEd;AAAA,QACN,CAAK;AAAA,MACL,CAAI;AAAA,IACD,GAAC,CAAC;AAAA,EACH;AACD,oBAAmB;AACnBA,sBAAI,IAAI,kBAAkB,OAAK;AAC9BA,2DAAY,kBAAkB,CAAC;AAC/B,sBAAmB;AAAA,EACrB,CAAE;AACF;;"}